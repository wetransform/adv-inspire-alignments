<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<alignment xmlns="http://www.esdi-humboldt.eu/hale/alignment">
    <base prefix="ba1" location="../base-functions.halex.alignment.xml"/>
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.inspire.geometry.normalizedPoint" name="AdV Punkt aus Ordinaten erstellen" type="groovy">
            <cf:input eager="false" maxOccurs="1" minOccurs="1" name="northing">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:input eager="false" maxOccurs="1" minOccurs="1" name="easting">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:output eager="false" maxOccurs="1" minOccurs="1">
                <cf:type name="PointType" ns="http://www.opengis.net/gml/3.2"/>
            </cf:output>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
// determine Zone&#xD;
int zone = Math.floor(easting / 1000000.0);&#xD;
String code = "EPSG:25832"&#xD;
&#xD;
if (zone == 31) {&#xD;
  code = "EPSG:25831"&#xD;
}&#xD;
else if (zone == 33) {&#xD;
  code = "EPSG:25833"&#xD;
}&#xD;
&#xD;
def x = easting - (zone * 1000000.0)&#xD;
def y = northing&#xD;
&#xD;
_.geom.with(geometry: "POINT($x $y)", crs: code)&#xD;

</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">Diese Funktion bildet einen Punkt auf Basis des Rechtswerts ($easting) und des Hochwerts ($northing). Dabei wird die Zone identifiziert und das Koordinatensystem entsprechend gesetzt. Die Funktion unterstützt nur Koordinaten in den Bezugssystemen EPSG:25831 bis EPSG:25833.</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <cell relation="eu.esdihumboldt.hale.align.retype" id="C6bf67ab1-0fcc-4ee8-b6b8-bdf358665940" priority="normal">
        <source>
            <class>
                <type name="Hauskoordinaten"/>
            </class>
        </source>
        <target>
            <class>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </class>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="C7bfaf151-a82e-4cb9-a08a-0f31f0280ba6" priority="normal">
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="other:unpopulated" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy" id="Cfe80e618-ab77-42a0-bb11-45fd8b88e2f0" priority="normal">
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="SSS"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="component" ns="http://inspire.ec.europa.eu/schemas/ad/4.0">
                    <context>0</context>
                </child>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def id = SSS.replaceAll(/[^a-zA-Z_0-9\-]/, '_')

"#ThoroughfareName_$id"
</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="C283fefcc-5e12-4f09-b58a-c5c95f6eab4a" priority="normal">
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="LAN">
                    <condition lang="CQL">value &lt;&gt; '' and value &lt;&gt; '00'</condition>
                </child>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="component" ns="http://inspire.ec.europa.eu/schemas/ad/4.0">
                    <context>1</context>
                </child>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="#AdminUnitName_{LAN}" name="pattern"/>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy" id="C5f9de700-7784-47ce-a7dd-663d153c8248" priority="normal">
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="RBZ">
                    <condition lang="CQL">value &lt;&gt; '' and value &lt;&gt; '0'</condition>
                </child>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="LAN"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="component" ns="http://inspire.ec.europa.eu/schemas/ad/4.0">
                    <context>2</context>
                </child>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
if (RBZ) {
	"#AdminUnitName_${LAN}${RBZ}"
}
else {
	throw new NoResultException()
}
</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy" id="C39b9585c-9471-4950-b97c-af52ecb25867" priority="normal">
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="KRS">
                    <condition lang="CQL">value &lt;&gt; '' and value &lt;&gt; '00'</condition>
                </child>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="RBZ"/>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="LAN"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="component" ns="http://inspire.ec.europa.eu/schemas/ad/4.0">
                    <context>3</context>
                </child>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
if (KRS) {
	"#AdminUnitName_${LAN}${RBZ}${KRS}"
}
else {
	throw new NoResultException()
}
</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="C5e36e9e6-55e6-4482-8177-b1191bb080fb" priority="normal">
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="GMD">
                    <condition lang="CQL">value &lt;&gt; ''</condition>
                </child>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="KRS"/>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="RBZ"/>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="LAN"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="component" ns="http://inspire.ec.europa.eu/schemas/ad/4.0">
                    <context>4</context>
                </child>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="#AdminUnitName_{LAN}{RBZ}{KRS}{GMD}" name="pattern"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="Cbfb7b3cb-018e-44ce-b36d-63d8f2e63d99" priority="normal">
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="PLZ">
                    <condition lang="CQL">value is not null and value &lt;&gt; ''</condition>
                </child>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="component" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="#PostalDescriptor_{PLZ}" name="pattern"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="C61eae38a-a438-4c9d-b10c-b3745a9762c6" priority="normal">
        <source name="id">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="OI"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.identifier" id="Ce104b160-079e-4ee8-8bd0-a7acbedb08ac" priority="normal">
        <source name="id">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="OI"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="identifier" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="C61cd3581-bb80-4967-b812-7a3f6905105e" priority="normal">
        <source name="id">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="OI"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.namespace" id="Cf2f28067-1780-4ffd-bbee-af75116bed78" priority="normal">
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="namespace" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C43c8131c-0483-47b4-a90b-f3a376ac10ad" priority="normal">
        <source>
            <property>
                <type name="Hauskoordinaten"/>
                <child name="HNR"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="locator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="AddressLocator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="designator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="LocatorDesignator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="designator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="C579e6256-e912-4488-9daf-4bf3d5f7957d" priority="normal">
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="locator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="AddressLocator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="designator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="LocatorDesignator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="type" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="http://inspire.ec.europa.eu/codelist/LocatorDesignatorTypeValue/addressNumber" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="C33ed37fc-b2d4-4c8c-8e67-251fc7801cf4" priority="normal">
        <source name="anchor">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="HNR"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="locator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="AddressLocator" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="level" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="http://inspire.ec.europa.eu/codelist/LocatorLevelValue/unitLevel" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="C8c992034-e1fa-44ba-9b11-fba8b6484803" priority="normal">
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="position" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="GeographicPosition" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="default" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </property>
        </target>
        <parameter value="true" name="value"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.geometry.normalizedPoint" id="C0969a7e1-30e8-4a08-8544-a1b2fe48035a" priority="normal">
        <source name="easting">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="EEE"/>
            </property>
        </source>
        <source name="northing">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="NNN"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="position" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="GeographicPosition" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="geometry" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="Point" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.classification" id="Cd80f7ca6-c124-4145-bf5f-2011d63c3b90" priority="normal">
        <source>
            <property>
                <type name="Hauskoordinaten"/>
                <child name="QUA"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="position" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="GeographicPosition" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="specification" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <complexParameter name="lookupTable">
            <lookup-table xmlns:ns2="http://www.esdi-humboldt.eu/hale/alignment" xmlns="">
                <entry>
                    <key value="A"/>
                    <value value="http://inspire.ec.europa.eu/codelist/GeometrySpecificationValue/building"/>
                </entry>
                <entry>
                    <key value="B"/>
                    <value value="http://inspire.ec.europa.eu/codelist/GeometrySpecificationValue/parcel"/>
                </entry>
                <entry>
                    <key value="R"/>
                    <value value="http://inspire.ec.europa.eu/codelist/GeometrySpecificationValue/parcel"/>
                </entry>
            </lookup-table>
        </complexParameter>
        <parameter value="null" name="notClassifiedAction"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="C0936bab7-61ab-4abf-8d00-76f742daf571" priority="normal">
        <target>
            <property>
                <type name="AddressType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="validFrom" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="other:unpopulated" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.retype" id="Cb411eac2-d187-4ac9-a98e-af88c5ee6ec2" priority="normal">
        <source>
            <class>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'G'</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </class>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.retype" id="Cb1a3ef2a-7ce5-4cb3-b25c-5cd5d9d4f2d3" priority="normal">
        <source>
            <class>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'K' and c &lt;&gt; '00' and c &lt;&gt; ''</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </class>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.retype" id="C8b77b6f5-4d21-46e3-b5aa-7d0b4ee12cd3" priority="normal">
        <source>
            <class>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'L' and a &lt;&gt; '00' and a &lt;&gt; ''</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </class>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.retype" id="Cf87ecfad-78a4-4c4f-935c-a81b0078750a" priority="normal">
        <source>
            <class>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'R' and b &lt;&gt; '0' and b &lt;&gt; ''</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </class>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="C26eae26b-f539-4c89-bf99-8d57abd3a557" priority="normal">
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="other:unpopulated" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="C9867f699-6a70-4bca-8102-46296f733a15" priority="normal">
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'G'</condition>
                </type>
                <child name="a"/>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'G'</condition>
                </type>
                <child name="b"/>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'G'</condition>
                </type>
                <child name="c"/>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'G'</condition>
                </type>
                <child name="d"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="AdminUnitName_{a}{b}{c}{d}" name="pattern"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="Cdd2e0fdb-86eb-4720-a114-d0e87ca44cf0" priority="normal">
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'K' and c &lt;&gt; '00' and c &lt;&gt; ''</condition>
                </type>
                <child name="a"/>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'K' and c &lt;&gt; '00' and c &lt;&gt; ''</condition>
                </type>
                <child name="b"/>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'K' and c &lt;&gt; '00' and c &lt;&gt; ''</condition>
                </type>
                <child name="c"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="AdminUnitName_{a}{b}{c}" name="pattern"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="Cb0b60c62-2138-4c11-b63d-516fe94a6785" priority="normal">
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'L' and a &lt;&gt; '00' and a &lt;&gt; ''</condition>
                </type>
                <child name="a"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="AdminUnitName_{a}" name="pattern"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="Cca2772d3-cb14-4574-a9bc-feff094275a3" priority="normal">
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'R' and b &lt;&gt; '0' and b &lt;&gt; ''</condition>
                </type>
                <child name="a"/>
            </property>
        </source>
        <source name="var">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'R' and b &lt;&gt; '0' and b &lt;&gt; ''</condition>
                </type>
                <child name="b"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="AdminUnitName_{a}{b}" name="pattern"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="C95786a23-4df6-4327-88c9-85193bb8ba80" priority="normal">
        <source name="anchor">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'G'</condition>
                </type>
                <child name="d"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="level" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="http://inspire.ec.europa.eu/codelist/AdministrativeHierarchyLevel/6thOrder" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="Cadd69904-4c3b-42ca-a1c7-7716ad4e911c" priority="normal">
        <source name="anchor">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'K' and c &lt;&gt; '00' and c &lt;&gt; ''</condition>
                </type>
                <child name="d"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="level" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="http://inspire.ec.europa.eu/codelist/AdministrativeHierarchyLevel/4thOrder" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="C2f56ac1a-0566-4332-aa8c-123254b9de00" priority="normal">
        <source name="anchor">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'L' and a &lt;&gt; '00' and a &lt;&gt; ''</condition>
                </type>
                <child name="b"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="level" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="http://inspire.ec.europa.eu/codelist/AdministrativeHierarchyLevel/2ndOrder" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="C5acd4145-c2af-4e09-8cab-0f6020e9c25d" priority="normal">
        <source name="anchor">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'R' and b &lt;&gt; '0' and b &lt;&gt; ''</condition>
                </type>
                <child name="c"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="level" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="http://inspire.ec.europa.eu/codelist/AdministrativeHierarchyLevel/3rdOrder" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="C9ac58560-d1ff-4443-a071-65eea14f6ef8" priority="normal">
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="level" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="unknown" name="value"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="Cf25c20c4-3d93-4821-96fe-c0ee234e8d00" priority="normal">
        <source name="spelling">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'G'</condition>
                </type>
                <child name="e"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="name" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C0858c80d-365e-4886-9396-1fb25344a810" priority="normal">
        <source name="spelling">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'K' and c &lt;&gt; '00' and c &lt;&gt; ''</condition>
                </type>
                <child name="d"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="name" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C776abe3c-0609-4337-9617-caa3a04eb0c4" priority="normal">
        <source name="spelling">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'L' and a &lt;&gt; '00' and a &lt;&gt; ''</condition>
                </type>
                <child name="b"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="name" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C7406acde-5dde-4676-b93c-d4867f72d099" priority="normal">
        <source name="spelling">
            <property>
                <type name="Schlüssel">
                    <condition lang="CQL">typ = 'R' and b &lt;&gt; '0' and b &lt;&gt; ''</condition>
                </type>
                <child name="c"/>
            </property>
        </source>
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="name" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="Ce87bdbc2-c99a-450c-9c4d-de9261d3a46e" priority="normal">
        <target>
            <property>
                <type name="AdminUnitNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="validFrom" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="other:unpopulated" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.merge" id="Ccba5d1e0-650c-4a47-985f-c7842e2297f1" priority="normal">
        <source>
            <class>
                <type name="Hauskoordinaten">
                    <condition lang="CQL">PLZ is not null and PLZ &lt;&gt; ''</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="PostalDescriptorType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </class>
        </target>
        <parameter value="true" name="auto_detect"/>
        <parameter value="PLZ" name="property"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="Ce4b12251-61d3-40d3-8335-cc3d8f2c56e0" priority="normal">
        <target>
            <property>
                <type name="PostalDescriptorType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="other:unpopulated" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="C013f9b5d-99ce-4171-8413-d83765e82508" priority="normal">
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="PLZ"/>
            </property>
        </source>
        <target>
            <property>
                <type name="PostalDescriptorType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="PostalDescriptor_{PLZ}" name="pattern"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C6d95c1a8-5594-4d95-919c-d378d394cceb" priority="normal">
        <source>
            <property>
                <type name="Hauskoordinaten"/>
                <child name="PLZ"/>
            </property>
        </source>
        <target>
            <property>
                <type name="PostalDescriptorType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="postCode" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="Cf7ff965c-9899-4eac-b78b-a56539fe8d0a" priority="normal">
        <target>
            <property>
                <type name="PostalDescriptorType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="validFrom" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="other:unpopulated" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.merge" id="Cd619f856-3443-4150-9e26-0cd14f392dc1" priority="normal">
        <source>
            <class>
                <type name="Hauskoordinaten"/>
            </class>
        </source>
        <target>
            <class>
                <type name="ThoroughfareNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
            </class>
        </target>
        <parameter value="true" name="auto_detect"/>
        <parameter value="STN" name="property"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="Cf95c3e71-b0af-4308-aee9-622fcb0008e3" priority="normal">
        <target>
            <property>
                <type name="ThoroughfareNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="other:unpopulated" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy" id="C30814c3e-10a3-4608-838d-6599dd113160" priority="normal">
        <source name="var">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="SSS"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="ThoroughfareNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def id = SSS.replaceAll(/[^a-zA-Z_0-9\-]/, '_')

"ThoroughfareName_$id"
</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C26a26d1a-7e30-49f9-b519-94a95d0c158f" priority="normal">
        <source name="spelling">
            <property>
                <type name="Hauskoordinaten"/>
                <child name="STN"/>
            </property>
        </source>
        <target>
            <property>
                <type name="ThoroughfareNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="name" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="ThoroughfareNameValue" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="name" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="Cfda6df6d-aac7-4852-8052-b530201415c4" priority="normal">
        <target>
            <property>
                <type name="ThoroughfareNameType" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="validFrom" ns="http://inspire.ec.europa.eu/schemas/ad/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="other:unpopulated" name="value"/>
    </cell>
</alignment>
